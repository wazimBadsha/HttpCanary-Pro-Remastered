### 上传服务器

此插件可以将数据包文件打包上传到指定服务器。如果手机和电脑是在同一个局域网下，将电脑作为本地服务器，便可以自动同步手机的数据包文件到电脑。当然可以配置上传到远程服务器，原理是相同的。另外，数据包上传是在每次抓包停止的时候触发。

**此插件仅限高级版本可用**

本教程旨在说明如何在电脑配置一个本地服务器，将HttpCanary捕获的网络数据包上传到电脑。

#### 配置HttpCanary插件文件

在/HttpCanary/plugins/PacketsUpload目录下的config.json中配置电脑的IP地址，例如192.168.1.4，端口号是9090。同时我们配置了一个自定义的header（可选）。
```json
{
  "hello": "ok",
  "server": "http://192.168.1.4:9090"
}
```

#### 配置本地服务器

这里使用nodejs来快速搭建服务器，当然也可以使用其它框架。在github上已经提供了服务端的nodejs代码，可以直接运行，[点我查看](https://github.com/MegatronKing/HttpCanary/tree/master/plugins/PacketsUpload)。

##### 1. 安装nodejs

首先需要安装nodejs，可以从[官网](https://nodejs.org)下载，也可以使用电脑自带的包管理器。

##### 2. 配置服务器代码

下载上面的app.js和package.json两个文件，放到同一个目录下面：
```
    .
    ├── app.js
    └── package.json
```

运行npm命令安装依赖包：
```
npm install
```

##### 3. 启动服务器

运行node命令启动服务器：
```
node app.js
```

在手机上操作一番，当抓包完成后，便可以在服务器文件夹中看到同步过来的数据包文件了！数据包文件格式是hcy二进制格式的，PC端没有相应的软件可以直接打开，但是可以用HEX等文件进行分析。

##### 4. 注意事项

**为了您的隐私安全，请勿配置未知来源的服务器地址**